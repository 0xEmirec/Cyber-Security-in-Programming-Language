from flask import Flask,render_template,jsonify
import sqlite3

app = Flask(__name__)

@app.route("/")
def index():
    return render_template("index.html")

@app.route("/user/<string:username>")
def sql_inj(username):
    con = sqlite3.connect("test.db")
    cur = con.cursor()
    cur.execute("select * from users where username = '%s'" % username)
    data = str(cur.fetchall())
    con.close()
    import logging
    logging.basicConfig(filename="restapi.log", filemode='w', level=logging.DEBUG)
    logging.debug(data)
    return jsonify(data=data),200

app.run()